# 乌蒙山连着山外山深海大模型竞赛开源方案

- **Author**：乌蒙山连着山外山

## 性能表现

- **得分**：45.47
- **运行时间**：约4分钟
- **Tokens消耗**：约200万

---

## 项目简介

本项目是一个简易的智能问答系统，主要利用`GLM-4-Plus`函数调用功能，针对用户提供的问题进行基础查询、分析和应答。它支持简单的逻辑处理，并能通过内置函数完成基本的计算或数据提取任务。

---

### 主要特点：

1. **数据预处理与模型预测：**
    - 对于输入数据进行预处理，系统采用数学模型对正常数据进行状态预测标记。这样，系统能够准确分析和分类数据，并输出预测结果。
    - 针对存在噪声的数据，通过少样本学习和提示词，结合大语言模型（LLM）进行状态标记和预测，从而有效应对复杂和不确定的数据环境。

2. **简洁高效的API设计：**
    - 系统设计了几个简洁的API接口，能够高效地完成各类查询任务。用户通过这些API，可以轻松访问数据表，快速获得所需答案。

3. **GLM函数调用功能：**
    - 通过GLM函数调用，系统能够实现快速、精确的自然语言理解与处理。此功能的集成使得系统能够在用户提出问题时，结合已有数据进行即时分析，并提供对应的解决方案。
    - 因时间仓促，当前方案未集成agent（智能代理），在多步骤问题中的应答能力弱。

   
## 问答逻辑示例

### 输入示例

用户提问：

```
2024/8/23 上午折臂吊车的总能耗是多少（单位化成kWh，保留2位小数）？
```

### 输出示例

程序返回答案：

```
折臂吊车的总能耗为 X.XX kWh。
```

---

## 数据说明

### 输入数据

本方案均使用了官方提供的初赛数据，他们位于`assets`下。

### 输出数据

所有生成的中间数据和结果数据均保存在以下文件夹中：

1. `database_in_use`：处理后的数据文件。
2. `data`：临时数据文件。
3. `result.jsonl`: 用于提交的答案文件。

### 注释文件

生成的字段注释存储在 `dict.json` 中，记录了所有数据表的字段注释信息。

---

## 目录结构

```

├── database_in_use/            # 处理后的数据表
├── data/                       # 数据处理的中间结果
├── run.py                      # 主运行脚本
├── dict.json                   # 字段注释文件
├── tools.py                    # 工具模块
├── api.py                      # 自定义 API 功能模块
├── data_process.py             # 数据预处理脚本
└── README.md                   # 项目说明文件
```

## 快速开始

1. 创建虚拟环境并安装依赖文件:

```shell
pip isntall -r requirements.txt
```

2. 运行预处理程序

```bash
ZHIPUAI_API_KEY={your zhipuai api key} python data_process.py
```

这里会生成`dict.json`文件。

3. 运行推理程序

```bash
ZHIPUAI_API_KEY={your zhipuai api key} python run.py
```

这将会执行主函数并得到答案。
